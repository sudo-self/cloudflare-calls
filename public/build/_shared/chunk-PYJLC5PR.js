import{a as Ue}from"/build/_shared/chunk-3YOPFW4A.js";import{a as Fe,d as Re}from"/build/_shared/chunk-5YSEWQXG.js";function S(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Pr(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Et(r,t){var e={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&t.indexOf(o)<0&&(e[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(r);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(r,o[n])&&(e[o[n]]=r[o[n]]);return e}function $r(r,t,e,o){function n(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function f(s){try{u(o.next(s))}catch(m){a(m)}}function c(s){try{u(o.throw(s))}catch(m){a(m)}}function u(s){s.done?i(s.value):n(s.value).then(f,c)}u((o=o.apply(r,t||[])).next())})}function ur(r,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,n,i,a;return a={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function f(u){return function(s){return c([u,s])}}function c(u){if(o)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(e=0)),e;)try{if(o=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(s){u=[6,s],n=0}finally{o=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function k(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var o=e.call(r),n,i=[],a;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(f){a={error:f}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i}function O(r,t,e){if(e||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))}function F(r){return this instanceof F?(this.v=r,this):new F(r)}function Qr(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=e.apply(r,t||[]),n,i=[];return n={},f("next"),f("throw"),f("return",a),n[Symbol.asyncIterator]=function(){return this},n;function a(l){return function(g){return Promise.resolve(g).then(l,m)}}function f(l,g){o[l]&&(n[l]=function(d){return new Promise(function(D,T){i.push([l,d,D,T])>1||c(l,d)})},g&&(n[l]=g(n[l])))}function c(l,g){try{u(o[l](g))}catch(d){y(i[0][3],d)}}function u(l){l.value instanceof F?Promise.resolve(l.value.v).then(s,m):y(i[0][2],l)}function s(l){c("next",l)}function m(l){c("throw",l)}function y(l,g){l(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Xr(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof k=="function"?k(r):r[Symbol.iterator](),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(i){e[i]=r[i]&&function(a){return new Promise(function(f,c){a=r[i](a),n(f,c,a.done,a.value)})}}function n(i,a,f,c){Promise.resolve(c).then(function(u){i({value:u,done:f})},a)}}var Pr,Zr,_=Fe(()=>{Pr=function(r,t){return Pr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])},Pr(r,t)};Zr=function(){return Zr=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Zr.apply(this,arguments)}});function p(r){return typeof r=="function"}function We(r){return p(r?.lift)}function h(r){return function(t){if(We(t))return t.lift(function(e){try{return r(e,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}_();_();_();function cr(r){var t=function(o){Error.call(o),o.stack=new Error().stack},e=r(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var sr=cr(function(r){return function(e){r(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(o,n){return n+1+") "+o.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function R(r,t){if(r){var e=r.indexOf(t);0<=e&&r.splice(e,1)}}var M=function(){function r(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var t,e,o,n,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var f=k(a),c=f.next();!c.done;c=f.next()){var u=c.value;u.remove(this)}}catch(d){t={error:d}}finally{try{c&&!c.done&&(e=f.return)&&e.call(f)}finally{if(t)throw t.error}}else a.remove(this);var s=this.initialTeardown;if(p(s))try{s()}catch(d){i=d instanceof sr?d.errors:[d]}var m=this._finalizers;if(m){this._finalizers=null;try{for(var y=k(m),l=y.next();!l.done;l=y.next()){var g=l.value;try{re(g)}catch(d){i=i??[],d instanceof sr?i=O(O([],w(i)),w(d.errors)):i.push(d)}}}catch(d){o={error:d}}finally{try{l&&!l.done&&(n=y.return)&&n.call(y)}finally{if(o)throw o.error}}}if(i)throw new sr(i)}},r.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)re(t);else{if(t instanceof r){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},r.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},r.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},r.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&R(e,t)},r.prototype.remove=function(t){var e=this._finalizers;e&&R(e,t),t instanceof r&&t._removeParent(this)},r.EMPTY=function(){var t=new r;return t.closed=!0,t}(),r}();var jr=M.EMPTY;function pr(r){return r instanceof M||r&&"closed"in r&&p(r.remove)&&p(r.add)&&p(r.unsubscribe)}function re(r){p(r)?r():r.unsubscribe()}var A={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};_();var N={setTimeout:function(r,t){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];var n=N.delegate;return n?.setTimeout?n.setTimeout.apply(n,O([r,t],w(e))):setTimeout.apply(void 0,O([r,t],w(e)))},clearTimeout:function(r){var t=N.delegate;return(t?.clearTimeout||clearTimeout)(r)},delegate:void 0};function lr(r){N.setTimeout(function(){var t=A.onUnhandledError;if(t)t(r);else throw r})}function Z(){}var ee=function(){return Dr("C",void 0,void 0)}();function te(r){return Dr("E",void 0,r)}function oe(r){return Dr("N",r,void 0)}function Dr(r,t,e){return{kind:r,value:t,error:e}}var U=null;function q(r){if(A.useDeprecatedSynchronousErrorHandling){var t=!U;if(t&&(U={errorThrown:!1,error:null}),r(),t){var e=U,o=e.errorThrown,n=e.error;if(U=null,o)throw n}}else r()}function ne(r){A.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=r)}var $=function(r){S(t,r);function t(e){var o=r.call(this)||this;return o.isStopped=!1,e?(o.destination=e,pr(e)&&e.add(o)):o.destination=qe,o}return t.create=function(e,o,n){return new W(e,o,n)},t.prototype.next=function(e){this.isStopped?Lr(oe(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Lr(te(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Lr(ee,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(M);var ze=Function.prototype.bind;function kr(r,t){return ze.call(r,t)}var Ve=function(){function r(t){this.partialObserver=t}return r.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(o){mr(o)}},r.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(o){mr(o)}else mr(t)},r.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){mr(e)}},r}(),W=function(r){S(t,r);function t(e,o,n){var i=r.call(this)||this,a;if(p(e)||!e)a={next:e??void 0,error:o??void 0,complete:n??void 0};else{var f;i&&A.useDeprecatedNextContext?(f=Object.create(e),f.unsubscribe=function(){return i.unsubscribe()},a={next:e.next&&kr(e.next,f),error:e.error&&kr(e.error,f),complete:e.complete&&kr(e.complete,f)}):a=e}return i.destination=new Ve(a),i}return t}($);function mr(r){A.useDeprecatedSynchronousErrorHandling?ne(r):lr(r)}function Ne(r){throw r}function Lr(r,t){var e=A.onStoppedNotification;e&&N.setTimeout(function(){return e(r,t)})}var qe={closed:!0,next:Z,error:Ne,complete:Z};function v(r,t,e,o,n){return new Je(r,t,e,o,n)}var Je=function(r){S(t,r);function t(e,o,n,i,a,f){var c=r.call(this,e)||this;return c.onFinalize=a,c.shouldUnsubscribe=f,c._next=o?function(u){try{o(u)}catch(s){e.error(s)}}:r.prototype._next,c._error=i?function(u){try{i(u)}catch(s){e.error(s)}finally{this.unsubscribe()}}:r.prototype._error,c._complete=n?function(){try{n()}catch(u){e.error(u)}finally{this.unsubscribe()}}:r.prototype._complete,c}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var o=this.closed;r.prototype.unsubscribe.call(this),!o&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}($);function L(r,t){return h(function(e,o){var n=0;e.subscribe(v(o,function(i){o.next(r.call(t,i,n++))}))})}_();_();var J=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function I(r){return r}function ie(r){return r.length===0?I:r.length===1?r[0]:function(e){return r.reduce(function(o,n){return n(o)},e)}}var b=function(){function r(t){t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,o){var n=this,i=Ge(t)?t:new W(t,e,o);return q(function(){var a=n,f=a.operator,c=a.source;i.add(f?f.call(i,c):c?n._subscribe(i):n._trySubscribe(i))}),i},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},r.prototype.forEach=function(t,e){var o=this;return e=ae(e),new e(function(n,i){var a=new W({next:function(f){try{t(f)}catch(c){i(c),a.unsubscribe()}},error:i,complete:n});o.subscribe(a)})},r.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},r.prototype[J]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ie(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=ae(t),new t(function(o,n){var i;e.subscribe(function(a){return i=a},function(a){return n(a)},function(){return o(i)})})},r.create=function(t){return new r(t)},r}();function ae(r){var t;return(t=r??A.Promise)!==null&&t!==void 0?t:Promise}function Ye(r){return r&&p(r.next)&&p(r.error)&&p(r.complete)}function Ge(r){return r&&r instanceof $||Ye(r)&&pr(r)}var fe=cr(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var z=function(r){S(t,r);function t(){var e=r.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype.lift=function(e){var o=new ue(this,this);return o.operator=e,o},t.prototype._throwIfClosed=function(){if(this.closed)throw new fe},t.prototype.next=function(e){var o=this;q(function(){var n,i;if(o._throwIfClosed(),!o.isStopped){o.currentObservers||(o.currentObservers=Array.from(o.observers));try{for(var a=k(o.currentObservers),f=a.next();!f.done;f=a.next()){var c=f.value;c.next(e)}}catch(u){n={error:u}}finally{try{f&&!f.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}}})},t.prototype.error=function(e){var o=this;q(function(){if(o._throwIfClosed(),!o.isStopped){o.hasError=o.isStopped=!0,o.thrownError=e;for(var n=o.observers;n.length;)n.shift().error(e)}})},t.prototype.complete=function(){var e=this;q(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var o=e.observers;o.length;)o.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(e){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var o=this,n=this,i=n.hasError,a=n.isStopped,f=n.observers;return i||a?jr:(this.currentObservers=null,f.push(e),new M(function(){o.currentObservers=null,R(f,e)}))},t.prototype._checkFinalizedStatuses=function(e){var o=this,n=o.hasError,i=o.thrownError,a=o.isStopped;n?e.error(i):a&&e.complete()},t.prototype.asObservable=function(){var e=new b;return e.source=this,e},t.create=function(e,o){return new ue(e,o)},t}(b);var ue=function(r){S(t,r);function t(e,o){var n=r.call(this)||this;return n.destination=e,n.source=o,n}return t.prototype.next=function(e){var o,n;(n=(o=this.destination)===null||o===void 0?void 0:o.next)===null||n===void 0||n.call(o,e)},t.prototype.error=function(e){var o,n;(n=(o=this.destination)===null||o===void 0?void 0:o.error)===null||n===void 0||n.call(o,e)},t.prototype.complete=function(){var e,o;(o=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||o===void 0||o.call(e)},t.prototype._subscribe=function(e){var o,n;return(n=(o=this.source)===null||o===void 0?void 0:o.subscribe(e))!==null&&n!==void 0?n:jr},t}(z);var Q={now:function(){return(Q.delegate||Date).now()},delegate:void 0};var ce=function(r){S(t,r);function t(e,o,n){e===void 0&&(e=1/0),o===void 0&&(o=1/0),n===void 0&&(n=Q);var i=r.call(this)||this;return i._bufferSize=e,i._windowTime=o,i._timestampProvider=n,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=o===1/0,i._bufferSize=Math.max(1,e),i._windowTime=Math.max(1,o),i}return t.prototype.next=function(e){var o=this,n=o.isStopped,i=o._buffer,a=o._infiniteTimeWindow,f=o._timestampProvider,c=o._windowTime;n||(i.push(e),!a&&i.push(f.now()+c)),this._trimBuffer(),r.prototype.next.call(this,e)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var o=this._innerSubscribe(e),n=this,i=n._infiniteTimeWindow,a=n._buffer,f=a.slice(),c=0;c<f.length&&!e.closed;c+=i?1:2)e.next(f[c]);return this._checkFinalizedStatuses(e),o},t.prototype._trimBuffer=function(){var e=this,o=e._bufferSize,n=e._timestampProvider,i=e._buffer,a=e._infiniteTimeWindow,f=(a?1:2)*o;if(o<1/0&&f<i.length&&i.splice(0,i.length-f),!a){for(var c=n.now(),u=0,s=1;s<i.length&&i[s]<=c;s+=2)u=s;u&&i.splice(0,u+1)}},t}(z);_();_();var Y=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function dr(r){return p(r?.then)}function vr(r){return p(r[J])}function hr(r){return Symbol.asyncIterator&&p(r?.[Symbol.asyncIterator])}function br(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Be(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yr=Be();function xr(r){return p(r?.[yr])}_();function gr(r){return Qr(this,arguments,function(){var e,o,n,i;return ur(this,function(a){switch(a.label){case 0:e=r.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,F(e.read())];case 3:return o=a.sent(),n=o.value,i=o.done,i?[4,F(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,F(n)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function Sr(r){return p(r?.getReader)}function x(r){if(r instanceof b)return r;if(r!=null){if(vr(r))return He(r);if(Y(r))return Ke(r);if(dr(r))return Ze(r);if(hr(r))return se(r);if(xr(r))return $e(r);if(Sr(r))return Qe(r)}throw br(r)}function He(r){return new b(function(t){var e=r[J]();if(p(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ke(r){return new b(function(t){for(var e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}function Ze(r){return new b(function(t){r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,lr)})}function $e(r){return new b(function(t){var e,o;try{for(var n=k(r),i=n.next();!i.done;i=n.next()){var a=i.value;if(t.next(a),t.closed)return}}catch(f){e={error:f}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(e)throw e.error}}t.complete()})}function se(r){return new b(function(t){Xe(r,t).catch(function(e){return t.error(e)})})}function Qe(r){return se(gr(r))}function Xe(r,t){var e,o,n,i;return $r(this,void 0,void 0,function(){var a,f;return ur(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),e=Xr(r),c.label=1;case 1:return[4,e.next()];case 2:if(o=c.sent(),!!o.done)return[3,4];if(a=o.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return f=c.sent(),n={error:f},[3,11];case 6:return c.trys.push([6,,9,10]),o&&!o.done&&(i=e.return)?[4,i.call(e)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Cr(r){r===void 0&&(r={});var t=r.connector,e=t===void 0?function(){return new z}:t,o=r.resetOnError,n=o===void 0?!0:o,i=r.resetOnComplete,a=i===void 0?!0:i,f=r.resetOnRefCountZero,c=f===void 0?!0:f;return function(u){var s,m,y,l=0,g=!1,d=!1,D=function(){m?.unsubscribe(),m=void 0},T=function(){D(),s=y=void 0,g=d=!1},V=function(){var K=s;T(),K?.unsubscribe()};return h(function(K,Kr){l++,!d&&!g&&D();var ar=y=y??e();Kr.add(function(){l--,l===0&&!d&&!g&&(m=Mr(V,c))}),ar.subscribe(Kr),!s&&l>0&&(s=new W({next:function(fr){return ar.next(fr)},error:function(fr){d=!0,D(),m=Mr(T,n,fr),ar.error(fr)},complete:function(){g=!0,D(),m=Mr(T,a),ar.complete()}}),x(K).subscribe(s))})(u)}}function Mr(r,t){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];if(t===!0){r();return}if(t!==!1){var n=new W({next:function(){n.unsubscribe(),r()}});return x(t.apply(void 0,O([],w(e)))).subscribe(n)}}function rt(r,t,e){var o,n,i,a,f=!1;return r&&typeof r=="object"?(o=r.bufferSize,a=o===void 0?1/0:o,n=r.windowTime,t=n===void 0?1/0:n,i=r.refCount,f=i===void 0?!1:i,e=r.scheduler):a=r??1/0,Cr({connector:function(){return new ce(a,t,e)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:f})}_();var G=function(r){S(t,r);function t(e){var o=r.call(this)||this;return o._value=e,o}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(e){var o=r.prototype._subscribe.call(this,e);return!o.closed&&e.next(this._value),o},t.prototype.getValue=function(){var e=this,o=e.hasError,n=e.thrownError,i=e._value;if(o)throw n;return this._throwIfClosed(),i},t.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},t}(z);_();_();var pe=function(r){S(t,r);function t(e,o){return r.call(this)||this}return t.prototype.schedule=function(e,o){return o===void 0&&(o=0),this},t}(M);_();var X={setInterval:function(r,t){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];var n=X.delegate;return n?.setInterval?n.setInterval.apply(n,O([r,t],w(e))):setInterval.apply(void 0,O([r,t],w(e)))},clearInterval:function(r){var t=X.delegate;return(t?.clearInterval||clearInterval)(r)},delegate:void 0};var le=function(r){S(t,r);function t(e,o){var n=r.call(this,e,o)||this;return n.scheduler=e,n.work=o,n.pending=!1,n}return t.prototype.schedule=function(e,o){var n;if(o===void 0&&(o=0),this.closed)return this;this.state=e;var i=this.id,a=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(a,i,o)),this.pending=!0,this.delay=o,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(a,this.id,o),this},t.prototype.requestAsyncId=function(e,o,n){return n===void 0&&(n=0),X.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,o,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return o;o!=null&&X.clearInterval(o)},t.prototype.execute=function(e,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,o);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,o){var n=!1,i;try{this.work(e)}catch(a){n=!0,i=a||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),i},t.prototype.unsubscribe=function(){if(!this.closed){var e=this,o=e.id,n=e.scheduler,i=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,R(i,this),o!=null&&(this.id=this.recycleAsyncId(n,o,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},t}(pe);_();var Fr=function(){function r(t,e){e===void 0&&(e=r.now),this.schedulerActionCtor=t,this.now=e}return r.prototype.schedule=function(t,e,o){return e===void 0&&(e=0),new this.schedulerActionCtor(this,t).schedule(o,e)},r.now=Q.now,r}();var me=function(r){S(t,r);function t(e,o){o===void 0&&(o=Fr.now);var n=r.call(this,e,o)||this;return n.actions=[],n._active=!1,n}return t.prototype.flush=function(e){var o=this.actions;if(this._active){o.push(e);return}var n;this._active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=o.shift());if(this._active=!1,n){for(;e=o.shift();)e.unsubscribe();throw n}},t}(Fr);var de=new me(le);var wr=new b(function(r){return r.complete()});function ve(r){return r&&p(r.schedule)}function Rr(r){return r[r.length-1]}function _r(r){return p(Rr(r))?r.pop():void 0}function C(r){return ve(Rr(r))?r.pop():void 0}function he(r,t){return typeof Rr(r)=="number"?r.pop():t}function E(r,t,e,o,n){o===void 0&&(o=0),n===void 0&&(n=!1);var i=t.schedule(function(){e(),n?r.add(this.schedule(null,o)):this.unsubscribe()},o);if(r.add(i),!n)return i}function Or(r,t){return t===void 0&&(t=0),h(function(e,o){e.subscribe(v(o,function(n){return E(o,r,function(){return o.next(n)},t)},function(){return E(o,r,function(){return o.complete()},t)},function(n){return E(o,r,function(){return o.error(n)},t)}))})}function Er(r,t){return t===void 0&&(t=0),h(function(e,o){o.add(r.schedule(function(){return e.subscribe(o)},t))})}function be(r,t){return x(r).pipe(Er(t),Or(t))}function ye(r,t){return x(r).pipe(Er(t),Or(t))}function xe(r,t){return new b(function(e){var o=0;return t.schedule(function(){o===r.length?e.complete():(e.next(r[o++]),e.closed||this.schedule())})})}function ge(r,t){return new b(function(e){var o;return E(e,t,function(){o=r[yr](),E(e,t,function(){var n,i,a;try{n=o.next(),i=n.value,a=n.done}catch(f){e.error(f);return}a?e.complete():e.next(i)},0,!0)}),function(){return p(o?.return)&&o.return()}})}function Ir(r,t){if(!r)throw new Error("Iterable cannot be null");return new b(function(e){E(e,t,function(){var o=r[Symbol.asyncIterator]();E(e,t,function(){o.next().then(function(n){n.done?e.complete():e.next(n.value)})},0,!0)})})}function Se(r,t){return Ir(gr(r),t)}function we(r,t){if(r!=null){if(vr(r))return be(r,t);if(Y(r))return xe(r,t);if(dr(r))return ye(r,t);if(hr(r))return Ir(r,t);if(xr(r))return ge(r,t);if(Sr(r))return Se(r,t)}throw br(r)}function P(r,t){return t?we(r,t):x(r)}function B(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=C(r);return P(r,e)}_();var et=Array.isArray;function tt(r,t){return et(t)?r.apply(void 0,O([],w(t))):r(t)}function Tr(r){return L(function(t){return tt(r,t)})}var ot=Array.isArray,nt=Object.getPrototypeOf,it=Object.prototype,at=Object.keys;function _e(r){if(r.length===1){var t=r[0];if(ot(t))return{args:t,keys:null};if(ft(t)){var e=at(t);return{args:e.map(function(o){return t[o]}),keys:e}}}return{args:r,keys:null}}function ft(r){return r&&typeof r=="object"&&nt(r)===it}function Oe(r,t){return r.reduce(function(e,o,n){return e[o]=t[n],e},{})}function rr(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=C(r),o=_r(r),n=_e(r),i=n.args,a=n.keys;if(i.length===0)return P([],e);var f=new b(ut(i,e,a?function(c){return Oe(a,c)}:I));return o?f.pipe(Tr(o)):f}function ut(r,t,e){return e===void 0&&(e=I),function(o){Ee(t,function(){for(var n=r.length,i=new Array(n),a=n,f=n,c=function(s){Ee(t,function(){var m=P(r[s],t),y=!1;m.subscribe(v(o,function(l){i[s]=l,y||(y=!0,f--),f||o.next(e(i.slice()))},function(){--a||o.complete()}))},o)},u=0;u<n;u++)c(u)},o)}}function Ee(r,t,e){r?E(e,r,t):t()}function Ie(r,t,e,o,n,i,a,f){var c=[],u=0,s=0,m=!1,y=function(){m&&!c.length&&!u&&t.complete()},l=function(d){return u<o?g(d):c.push(d)},g=function(d){i&&t.next(d),u++;var D=!1;x(e(d,s++)).subscribe(v(t,function(T){n?.(T),i?l(T):t.next(T)},function(){D=!0},void 0,function(){if(D)try{u--;for(var T=function(){var V=c.shift();a?E(t,a,function(){return g(V)}):g(V)};c.length&&u<o;)T();y()}catch(V){t.error(V)}}))};return r.subscribe(v(t,l,function(){m=!0,y()})),function(){f?.()}}function er(r,t,e){return e===void 0&&(e=1/0),p(t)?er(function(o,n){return L(function(i,a){return t(o,i,n,a)})(x(r(o,n)))},e):(typeof t=="number"&&(e=t),h(function(o,n){return Ie(o,n,r,e)}))}function Ar(r){return r===void 0&&(r=1/0),er(I,r)}function Te(){return Ar(1)}function Ur(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Te()(P(r,C(r)))}_();var ct=["addListener","removeListener"],st=["addEventListener","removeEventListener"],pt=["on","off"];function tr(r,t,e,o){if(p(e)&&(o=e,e=void 0),o)return tr(r,t,e).pipe(Tr(o));var n=w(dt(r)?st.map(function(f){return function(c){return r[f](t,c,e)}}):lt(r)?ct.map(Ae(r,t)):mt(r)?pt.map(Ae(r,t)):[],2),i=n[0],a=n[1];if(!i&&Y(r))return er(function(f){return tr(f,t,e)})(x(r));if(!i)throw new TypeError("Invalid event target");return new b(function(f){var c=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return f.next(1<u.length?u:u[0])};return i(c),function(){return a(c)}})}function Ae(r,t){return function(e){return function(o){return r[e](t,o)}}}function lt(r){return p(r.addListener)&&p(r.removeListener)}function mt(r){return p(r.on)&&p(r.off)}function dt(r){return p(r.addEventListener)&&p(r.removeEventListener)}function H(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=C(r),o=he(r,1/0),n=r;return n.length?n.length===1?x(n[0]):Ar(o)(P(n,e)):wr}function vt(r,t){return h(function(e,o){var n=0;e.subscribe(v(o,function(i){return r.call(t,i,n++)&&o.next(i)}))})}function Pe(r){return h(function(t,e){var o=null,n=!1,i;o=t.subscribe(v(e,void 0,void 0,function(a){i=x(r(a,Pe(r)(t))),o?(o.unsubscribe(),o=null,i.subscribe(e)):n=!0})),n&&(o.unsubscribe(),o=null,i.subscribe(e))})}function Wr(r,t){return t===void 0&&(t=de),h(function(e,o){var n=null,i=null,a=null,f=function(){if(n){n.unsubscribe(),n=null;var u=i;i=null,o.next(u)}};function c(){var u=a+r,s=t.now();if(s<u){n=this.schedule(void 0,u-s),o.add(n);return}f()}e.subscribe(v(o,function(u){i=u,a=t.now(),n||(n=t.schedule(c,r),o.add(n))},function(){f(),o.complete()},void 0,function(){i=n=null}))})}function ht(r){return r<=0?function(){return wr}:h(function(t,e){var o=0;t.subscribe(v(e,function(n){++o<=r&&(e.next(n),r<=o&&e.complete())}))})}function zr(r,t){return t===void 0&&(t=I),r=r??bt,h(function(e,o){var n,i=!0;e.subscribe(v(o,function(a){var f=t(a);(i||!r(n,f))&&(i=!1,n=f,o.next(a))}))})}function bt(r,t){return r===t}function or(r,t){return h(function(e,o){var n=null,i=0,a=!1,f=function(){return a&&!n&&o.complete()};e.subscribe(v(o,function(c){n?.unsubscribe();var u=0,s=i++;x(r(c,s)).subscribe(n=v(o,function(m){return o.next(t?t(c,m,s,u++):m)},function(){n=null,f()}))},function(){a=!0,f()}))})}function yt(r,t,e){var o=p(r)||t||e?{next:r,error:t,complete:e}:r;return o?h(function(n,i){var a;(a=o.subscribe)===null||a===void 0||a.call(o);var f=!0;n.subscribe(v(i,function(c){var u;(u=o.next)===null||u===void 0||u.call(o,c),i.next(c)},function(){var c;f=!1,(c=o.complete)===null||c===void 0||c.call(o),i.complete()},function(c){var u;f=!1,(u=o.error)===null||u===void 0||u.call(o,c),i.error(c)},function(){var c,u;f&&((c=o.unsubscribe)===null||c===void 0||c.call(o)),(u=o.finalize)===null||u===void 0||u.call(o)}))}):I}_();function Vr(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=_r(r);return h(function(o,n){for(var i=r.length,a=new Array(i),f=r.map(function(){return!1}),c=!1,u=function(m){x(r[m]).subscribe(v(n,function(y){a[m]=y,!c&&!f[m]&&(f[m]=!0,(c=f.every(I))&&(f=null))},Z))},s=0;s<i;s++)u(s);o.subscribe(v(n,function(m){if(c){var y=O([m],w(a));n.next(e?e.apply(void 0,O([],w(y))):y)}}))})}var je=r=>(t,e)=>{let{prioritizeList:o=[],deprioritizeList:n=[]}=r,i=o.findIndex(u=>u.label===t.label&&u.kind===t.kind),a=o.findIndex(u=>u.label===e.label&&u.kind===e.kind);if(i!==-1&&a!==-1)return i-a;if(i!==-1)return-1;if(a!==-1)return 1;if(e.label.toLowerCase().includes("virtual")||e.label.toLowerCase().includes("iphone microphone"))return-1;let f=n.some(u=>u.label===t.label&&u.kind===t.kind),c=n.some(u=>u.label===e.label&&u.kind===e.kind);return f&&!c?1:!f&&c?-1:0},Nr="PRIORITIZED_DEVICE_LIST",qr="DEPRIORITIZED_DEVICE_LIST";function nr(){let r=localStorage.getItem(Nr);return r===null?[]:JSON.parse(r)}function Nf(r){xt(r),Jr(r),localStorage.setItem(Nr,JSON.stringify([r,...nr()])),Yr.next(nr())}function xt(r){localStorage.setItem(Nr,JSON.stringify(nr().filter(t=>!(t.label===r.label&&t.kind===r.kind)))),Yr.next(nr())}function ir(){let r=localStorage.getItem(qr);return r===null?[]:JSON.parse(r)}function De(r){localStorage.setItem(qr,JSON.stringify([...ir(),r])),Gr.next(ir())}function Jr(r){localStorage.setItem(qr,JSON.stringify(ir().filter(t=>!(t.label===r.label&&t.kind===r.kind)))),Gr.next(ir())}var Yr=new G([]),Gr=new G([]);function ke(){return H(Yr,B(nr()))}function Le(){return H(Gr,B(ir()))}function gt(){return H(navigator.mediaDevices.enumerateDevices(),tr(navigator.mediaDevices,"devicechange").pipe(Wr(1500),or(()=>navigator.mediaDevices.enumerateDevices())))}function Me(){return rr([gt(),ke()]).pipe(Vr(Le()),L(([[r,t],e])=>r.sort(je({prioritizeList:t,deprioritizeList:e}))))}async function Br(r){console.info("\u{1F469}\u{1F3FB}\u200D\u2695\uFE0F Checking track health...");let e=localStorage.getItem("flags.randomTrackFailuresEnabled")==="true"&&Math.random()<.2;e&&console.log("\u{1F3B2} Random track failure!");let o=!r.muted&&r.readyState==="live"&&r.enabled&&!e;return console.info(`\u{1F469}\u{1F3FB}\u200D\u2695\uFE0F track is ${o?"healthy":"unhealthy"}!`),o}var Hr=class extends Error{constructor(t){super(t),this.name=this.constructor.name}};function Xf(r,t=B({}),e=Me()){return rr([e.pipe(L(o=>o.filter(n=>n.kind===r)),zr((o,n)=>JSON.stringify(o)===JSON.stringify(n))),t]).pipe(or(([o,n])=>Ur(...o.filter(i=>i.kind===r).map(i=>new b(a=>{let f={current:()=>{}};return Ce(a,i,n,f),()=>{console.log("\u{1F6D1} Errored or no subscribers, stopping..."),f.current()}})),new b(i=>i.error(new Hr)))))}function Ce(r,t,e,o){let{deviceId:n,label:i}=t;console.log(`\u{1F64F}\u{1F3FB} Requesting ${i}`),navigator.mediaDevices.getUserMedia(t.kind==="videoinput"?{video:{...e,deviceId:n}}:{audio:{...e,deviceId:n}}).then(async a=>{let f=t.kind==="videoinput"?a.getVideoTracks()[0]:a.getAudioTracks()[0];if(await Br(f)){let c=()=>{console.log("Cleaning up..."),f.stop(),document.removeEventListener("visibilitychange",u)},u=async()=>{document.visibilityState==="visible"&&(console.log("Tab is foregrounded, checking health..."),!await Br(f)&&(console.log("Reacquiring track"),c(),Ce(r,t,e,o)))};document.addEventListener("visibilitychange",u),o.current=c,r.next(f),Jr(t)}else console.log("\u2620\uFE0F track is not healthy, stopping"),De(t),f.stop(),r.complete();f.addEventListener("ended",()=>{console.log("\u{1F50C} Track ended abrubptly"),r.complete()})}).catch(a=>{a instanceof Error&&a.name==="NotReadable"?r.complete():r.error(a)})}var j=Re(Ue());function ou(r,t){let[e,o]=(0,j.useState)(t);return St(r,o),e}function St(r,t){let e=(0,j.useRef)(t);e.current=t,(0,j.useEffect)(()=>{let o=r.subscribe(n=>e.current(n));return()=>{o.unsubscribe()}},[r])}function nu(r){let t=(0,j.useRef)(new G(r)),e=(0,j.useRef)(t.current.asObservable()),o=(0,j.useRef)();return o.current!==r&&(o.current=r,t.current.next(r)),(0,j.useEffect)(()=>{let{current:n}=t;if(n)return()=>{n.complete()}},[]),e.current}export{Zr as a,Et as b,O as c,_ as d,b as e,P as f,B as g,L as h,rr as i,tr as j,vt as k,Pe as l,ht as m,zr as n,Cr as o,rt as p,or as q,yt as r,Vr as s,Nf as t,Xf as u,ou as v,St as w,nu as x};
//# sourceMappingURL=/build/_shared/chunk-PYJLC5PR.js.map
