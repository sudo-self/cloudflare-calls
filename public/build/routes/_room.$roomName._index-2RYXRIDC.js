import{a as B}from"/build/_shared/chunk-3CXHBKZJ.js";import{A as S,X as V,a as m,c as C,d as k,r as d,s as h,t as E,z as T}from"/build/_shared/chunk-FBY3JOII.js";import"/build/_shared/chunk-SWQS7VDC.js";import{a as I}from"/build/_shared/chunk-O5ZMIQP7.js";import{a as g,c as p}from"/build/_shared/chunk-3VBROEUY.js";import"/build/_shared/chunk-PYJLC5PR.js";import{a as l}from"/build/_shared/chunk-YERPF2QY.js";import"/build/_shared/chunk-6M6UZGDQ.js";import{b as N}from"/build/_shared/chunk-KS76FAJ5.js";import{a as H,b as R}from"/build/_shared/chunk-45HVJOSI.js";import{b as x,d as y}from"/build/_shared/chunk-LQCCCPTH.js";import{a as w,b as t}from"/build/_shared/chunk-3YOPFW4A.js";import{d as a}from"/build/_shared/chunk-5YSEWQXG.js";var O=a(H());var M=a(w());var n=a(t()),A=()=>{let[i,r]=(0,M.useState)(!1),s=E(),[e,v,c]=N(()=>{r(!1)},2e3);return(0,n.jsx)(d,{content:i?"Copied!":"Copy URL",open:i?!0:void 0,children:(0,n.jsxs)(l,{displayType:"secondary",onClick:()=>{navigator.clipboard.writeText(s),r(!0),c()},children:[(0,n.jsx)(p,{type:i?"ClipboardDocumentCheckIcon":"ClipboardDocumentIcon",className:"text-xl"}),(0,n.jsx)(m,{children:i?"Copied!":"Copy URL"})]})})};var j=a(w());var z=a(t()),f=(0,j.forwardRef)(({className:i,...r},s)=>(0,z.jsx)(S,{className:R("-scale-x-100",i),muted:!0,...r,ref:s}));f.displayName="SelfView";var P=a(I()),o=a(t());function L(){let{roomName:i}=y(),r=x(),{setJoined:s,userMedia:e,room:v}=k(),{videoStreamTrack:c,audioStreamTrack:b,audioEnabled:D}=e,U=new Set(v.otherUsers.filter(u=>u.tracks.audio).map(u=>u.name)).size,F=e.audioUnavailableReason?g[e.audioUnavailableReason]:null;return(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-4",children:[(0,o.jsx)("div",{className:"flex-1"}),(0,o.jsxs)("div",{className:"space-y-4 w-96",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold",children:i}),(0,o.jsxs)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:[`${U} ${U===1?"user":"users"} in the room.`," "]})]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(f,{className:"aspect-[4/3] w-full",videoTrack:c}),b&&(0,o.jsx)("div",{className:"absolute left-3 top-3",children:D?(0,o.jsx)(C,{audioTrack:b}):(0,o.jsx)(d,{content:"Mic is turned off",children:(0,o.jsxs)("div",{className:"text-white indication-shadow",children:[(0,o.jsx)(p,{type:"micOff"}),(0,o.jsx)(m,{children:"Mic is turned off"})]})})})]}),(e.audioUnavailableReason||e.videoUnavailableReason)&&(0,o.jsxs)("div",{className:"p-3 rounded-md text-sm text-zinc-800 bg-zinc-200 dark:text-zinc-200 dark:bg-zinc-700",children:[e.audioUnavailableReason==="NotAllowedError"&&e.videoUnavailableReason===void 0&&(0,o.jsx)("p",{children:"Mic permission was denied."}),e.videoUnavailableReason==="NotAllowedError"&&e.audioUnavailableReason===void 0&&(0,o.jsx)("p",{children:"Camera permission was denied."}),e.audioUnavailableReason==="NotAllowedError"&&e.videoUnavailableReason==="NotAllowedError"&&(0,o.jsx)("p",{children:"Mic and camera permissions were denied."}),e.audioUnavailableReason==="NotAllowedError"&&(0,o.jsxs)("p",{children:["Enable permission",e.audioUnavailableReason&&e.videoUnavailableReason?"s":""," ","and reload the page to join."]}),e.audioUnavailableReason==="DevicesExhaustedError"&&(0,o.jsx)("p",{children:"No working microphone found."}),e.videoUnavailableReason==="DevicesExhaustedError"&&(0,o.jsx)("p",{children:"No working webcam found."}),e.audioUnavailableReason==="UnknownError"&&(0,o.jsx)("p",{children:"Unknown microphone error."}),e.videoUnavailableReason==="UnknownError"&&(0,o.jsx)("p",{children:"Unknown webcam error."})]}),(0,o.jsxs)("div",{className:"flex gap-4 text-sm",children:[F?(0,o.jsx)(d,{content:"Unable to join without a mic.",children:(0,o.jsx)(l,{disabled:!0,children:"Join"})}):(0,o.jsx)(l,{onClick:()=>{s(!0),r("room")},children:"Join"}),(0,o.jsx)(T,{}),(0,o.jsx)(h,{}),(0,o.jsx)(V,{}),(0,o.jsx)(A,{})]})]}),(0,o.jsx)("div",{className:"flex flex-col justify-end flex-1",children:(0,o.jsx)(B,{className:"pt-6"})})]})}export{L as default};
//# sourceMappingURL=/build/routes/_room.$roomName._index-2RYXRIDC.js.map
